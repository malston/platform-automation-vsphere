{
  "meta": {
    "type": "db",
    "canSave": true,
    "canEdit": true,
    "canAdmin": true,
    "canStar": true,
    "slug": "pks-control-plane",
    "url": "/d/hw2-pks-control-plane/pks-control-plane",
    "expires": "0001-01-01T00:00:00Z",
    "created": "2020-08-04T18:26:56Z",
    "updated": "2020-08-07T16:47:14Z",
    "updatedBy": "Anonymous",
    "createdBy": "Anonymous",
    "version": 2,
    "hasAcl": false,
    "isFolder": false,
    "folderId": 370,
    "folderTitle": "Enterprise PKS",
    "folderUrl": "/dashboards/f/QEmrWRIMk/enterprise-pks",
    "provisioned": true,
    "provisionedExternalId": "pks-control-plane.json"
  },
  "dashboard": {
    "annotations": {
      "list": [
        {
          "builtIn": 1,
          "datasource": "-- Grafana --",
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
        }
      ]
    },
    "editable": true,
    "gnetId": null,
    "graphTooltip": 0,
    "id": 376,
    "links": [],
    "panels": [
      {
        "collapsed": true,
        "datasource": "",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 2,
        "panels": [
          {
            "content": "\n# PKS Control Plane\n\nAn Enterprise PKS environment consists of a PKS Control Plane and one or more workload clusters.\n\nEnterprise PKS administrators use the PKS Control Plane to deploy and manage Kubernetes clusters. The workload clusters run the apps pushed by developers.\n\nFor more information see [PKS Architecture](https://docs.pivotal.io/pks/1-7/control-plane.html)\n\n\n\n",
            "datasource": "",
            "gridPos": {
              "h": 5,
              "w": 24,
              "x": 0,
              "y": 1
            },
            "id": 4,
            "mode": "markdown",
            "timeFrom": null,
            "timeShift": null,
            "title": "",
            "type": "text"
          }
        ],
        "title": "About PKS Control Plane",
        "type": "row"
      },
      {
        "collapsed": true,
        "datasource": "",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 1
        },
        "id": 22,
        "panels": [
          {
            "dashboardFilter": "",
            "dashboardTags": [],
            "datasource": "",
            "folderId": null,
            "gridPos": {
              "h": 2,
              "w": 24,
              "x": 0,
              "y": 2
            },
            "id": 24,
            "limit": 10,
            "nameFilter": "",
            "onlyAlertsOnDashboard": true,
            "show": "current",
            "sortOrder": 1,
            "stateFilter": [],
            "timeFrom": null,
            "timeShift": null,
            "title": "",
            "type": "alertlist"
          }
        ],
        "title": "Alerts",
        "type": "row"
      },
      {
        "collapsed": false,
        "datasource": "",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 2
        },
        "id": 15,
        "panels": [],
        "title": "SLIs",
        "type": "row"
      },
      {
        "alert": {
          "alertRuleTags": {},
          "conditions": [
            {
              "evaluator": {
                "params": [
                  0.01
                ],
                "type": "lt"
              },
              "operator": {
                "type": "and"
              },
              "query": {
                "params": [
                  "A",
                  "5m",
                  "now"
                ]
              },
              "reducer": {
                "params": [],
                "type": "min"
              },
              "type": "query"
            }
          ],
          "executionErrorState": "alerting",
          "for": "10m",
          "frequency": "1m",
          "handler": 1,
          "message": "One or more PKS SLI tests have been failing for at least 10 minutes.\n\nPKS SLI Tests run every 1 minute by default.  This setting is configurable in Ops Manager and may have been changed. These tests are intended to give Platform Operators confidence that Application Developers can successfully interact with and manage applications in their clusters.\n\nNote: the sli tests will report a failure if any task (e.g. `login`, `clusters`) takes more than  1 minute to complete.\n\nTroubleshooting Steps:\n\nIf a failure occurs, attempt to use the failed PKS CLI command in a terminal to see why it is failing.",
          "name": "PKS CLI Command Status alert",
          "noDataState": "no_data",
          "notifications": []
        },
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "This panel graphs the results of the PKS SLI Test Exporter.  If the Failure rate is above zero then the operator will want to begin troubleshooting by checking the logs for the PKS SLI Exporter to see why the test is failing.",
        "fill": 0,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 0,
          "y": 3
        },
        "hiddenSeries": false,
        "id": 17,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 2,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "clamp_min(1-increase(pks_sli_task_failures_total[2m]), 0)",
            "interval": "",
            "legendFormat": "{{task}}",
            "refId": "A"
          }
        ],
        "thresholds": [
          {
            "colorMode": "critical",
            "fill": true,
            "line": true,
            "op": "lt",
            "value": 0.01
          }
        ],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "PKS SLI Tests",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "decimals": 0,
            "format": "short",
            "label": "0 = failure, 1 = success",
            "logBase": 1,
            "max": "1.2",
            "min": "-0.2",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": false
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "This panel graphs the results of the PKS SLI Test Exporter. If latency is unusually high, look into the PKS API vm and PKS DB vm health.",
        "fill": 8,
        "fillGradient": 0,
        "gridPos": {
          "h": 7,
          "w": 12,
          "x": 12,
          "y": 3
        },
        "hiddenSeries": false,
        "id": 37,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 0,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": true,
        "steppedLine": false,
        "targets": [
          {
            "expr": "pks_sli_task_run_duration_seconds",
            "interval": "",
            "legendFormat": "{{task}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "PKS SLI Tests Latency",
        "tooltip": {
          "shared": true,
          "sort": 2,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "decimals": null,
            "format": "short",
            "label": "",
            "logBase": 1,
            "max": null,
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": false
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "datasource": null,
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 0,
          "y": 10
        },
        "id": 32,
        "options": {
          "colorMode": "value",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "mappings": [
                {
                  "from": "",
                  "id": 1,
                  "operator": "",
                  "text": "Login ✓",
                  "to": "",
                  "type": 1,
                  "value": "0"
                },
                {
                  "from": "1",
                  "id": 2,
                  "operator": "",
                  "text": "Login ✘",
                  "to": "Infinity",
                  "type": 2,
                  "value": ">=0"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "increase(pks_sli_task_failures_total{task=\"login\"}[2m])",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "",
        "type": "stat"
      },
      {
        "datasource": null,
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 4,
          "y": 10
        },
        "id": 34,
        "options": {
          "colorMode": "value",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "mappings": [
                {
                  "from": "",
                  "id": 1,
                  "operator": "",
                  "text": "List ✓",
                  "to": "",
                  "type": 1,
                  "value": "0"
                },
                {
                  "from": "1",
                  "id": 2,
                  "operator": "",
                  "text": "List ✘",
                  "to": "Infinity",
                  "type": 2,
                  "value": ">=0"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "increase(pks_sli_task_failures_total{task=\"clusters\"}[2m])",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "",
        "type": "stat"
      },
      {
        "datasource": null,
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 8,
          "y": 10
        },
        "id": 36,
        "options": {
          "colorMode": "value",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "mappings": [
                {
                  "from": "",
                  "id": 1,
                  "operator": "",
                  "text": "Get Creds ✓",
                  "to": "",
                  "type": 1,
                  "value": "0"
                },
                {
                  "from": "1",
                  "id": 2,
                  "operator": "",
                  "text": "Get Creds ✘",
                  "to": "Infinity",
                  "type": 2,
                  "value": ">=0"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "increase(pks_sli_task_failures_total{task=\"get-credentials\"}[2m])",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "",
        "type": "stat"
      },
      {
        "datasource": null,
        "gridPos": {
          "h": 4,
          "w": 4,
          "x": 14,
          "y": 10
        },
        "id": 35,
        "options": {
          "colorMode": "value",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "mappings": [
                {
                  "from": "",
                  "id": 1,
                  "operator": "",
                  "text": "Plans ✓",
                  "to": "",
                  "type": 1,
                  "value": "0"
                },
                {
                  "from": "1",
                  "id": 2,
                  "operator": "",
                  "text": "Plans ✘",
                  "to": "Infinity",
                  "type": 2,
                  "value": ">=0"
                }
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 0.9
                  }
                ]
              }
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "increase(pks_sli_task_failures_total{task=\"plans\"}[2m])",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "",
        "type": "stat"
      },
      {
        "datasource": null,
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 18,
          "y": 10
        },
        "id": 38,
        "options": {
          "colorMode": "value",
          "fieldOptions": {
            "calcs": [
              "last"
            ],
            "defaults": {
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "blue",
                    "value": null
                  }
                ]
              },
              "title": "Number of Clusters"
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "pks_sli_number_of_clusters",
            "instant": true,
            "interval": "",
            "legendFormat": "Num Clusters",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "",
        "type": "stat"
      },
      {
        "collapsed": false,
        "datasource": "",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 14
        },
        "id": 6,
        "panels": [],
        "title": "VM Health",
        "type": "row"
      },
      {
        "cacheTimeout": null,
        "datasource": null,
        "description": "## Description\nThis is the most important BOSH metric to monitor. It indicates if the VM emitting the metric is healthy. Review this metric for all VMs to estimate the overall health of the system.\n\nMultiple unhealthy VMs signals problems with the underlying IAAS layer.\n\n## Troubleshooting Steps\nInvestigate the PKS logs for the unhealthy component.",
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 0,
          "y": 15
        },
        "id": 9,
        "links": [],
        "options": {
          "colorMode": "background",
          "fieldOptions": {
            "calcs": [
              "last"
            ],
            "defaults": {
              "mappings": [
                {
                  "id": 0,
                  "op": "=",
                  "text": "N/A",
                  "type": 1,
                  "value": "null"
                },
                {
                  "from": "",
                  "id": 2,
                  "operator": "",
                  "text": "UP",
                  "to": "",
                  "type": 1,
                  "value": "1"
                },
                {
                  "from": "",
                  "id": 3,
                  "operator": "",
                  "text": "DOWN",
                  "to": "",
                  "type": 1,
                  "value": "0"
                }
              ],
              "nullValueMode": "connected",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": null
                  },
                  {
                    "color": "green",
                    "value": 1
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "system_healthy{exported_job=~\"pivotal-container-service\"}",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "PKS API Health",
        "type": "stat"
      },
      {
        "cacheTimeout": null,
        "datasource": null,
        "description": "## Description\nThis is the most important BOSH metric to monitor. It indicates if the VM emitting the metric is healthy. Review this metric for all VMs to estimate the overall health of the system.\n\nMultiple unhealthy VMs signals problems with the underlying IAAS layer.\n\n## Troubleshooting Steps\nInvestigate the PKS logs for the unhealthy component.",
        "gridPos": {
          "h": 6,
          "w": 12,
          "x": 12,
          "y": 15
        },
        "id": 18,
        "links": [],
        "options": {
          "colorMode": "background",
          "fieldOptions": {
            "calcs": [
              "last"
            ],
            "defaults": {
              "mappings": [
                {
                  "id": 0,
                  "op": "=",
                  "text": "N/A",
                  "type": 1,
                  "value": "null"
                },
                {
                  "from": "",
                  "id": 1,
                  "operator": "",
                  "text": "UP",
                  "to": "",
                  "type": 1,
                  "value": "1"
                },
                {
                  "from": "",
                  "id": 2,
                  "operator": "",
                  "text": "DOWN",
                  "to": "",
                  "type": 1,
                  "value": "0"
                }
              ],
              "nullValueMode": "connected",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "green",
                    "value": 1
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "area",
          "justifyMode": "auto",
          "orientation": "horizontal"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "system_healthy{exported_job=~\"pks-db\"}",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "PKS DB Health",
        "type": "stat"
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\nThis is the most important BOSH metric to monitor. It indicates if the VM emitting the metric is healthy. Review this metric for all VMs to estimate the overall health of the system.\n\nMultiple unhealthy VMs signals problems with the underlying IAAS layer.\n\n## Troubleshooting Steps\nInvestigate the PKS logs for the unhealthy component.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 0,
          "y": 21
        },
        "hiddenSeries": false,
        "id": 8,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_healthy{exported_job=~\"pivotal-container-service|pks-db\"}",
            "instant": false,
            "interval": "",
            "legendFormat": "{{exported_job}} ",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "Health Status",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\n\nCPU: high value of `system_cpu_user` reported for this job for the displayed time interval\n\n## Troubleshooting Steps\n\nInvestigate the cause of the spike. If the cause is a normal workload increase, then scale up the affected VM(s) vertically.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 8,
          "y": 21
        },
        "hiddenSeries": false,
        "id": 11,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_cpu_user{exported_job=~\"pivotal-container-service|pks-db\"}",
            "interval": "",
            "legendFormat": "{{exported_job}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "CPU Usage",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": "110",
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\n\nMemory: high value of `system_mem_percent` reported for this job for the displayed time interval\n\n## Troubleshooting Steps\n\nThe response depends on the job the metric is associated with. If appropriate, scale affected jobs out and monitor for improvement.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 16,
          "y": 21
        },
        "hiddenSeries": false,
        "id": 12,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_mem_percent{exported_job=~\"pivotal-container-service|pks-db\"}",
            "interval": "",
            "legendFormat": "{{exported_job}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "Memory Usage",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": "110",
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\n\nSystem Disk: high value of `system_disk_system_percent` reported for this job for the displayed time interval. System disk holds the stemcell binaries, and should remain fairly static in size over the life of the VM.\n\n## Troubleshooting Steps\n\nInvestigate what is filling the job's system partition. This partition should not typically fill because BOSH deploys jobs to use ephemeral and persistent disks.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 0,
          "y": 29
        },
        "hiddenSeries": false,
        "id": 19,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_disk_system_percent{exported_job=~\"pivotal-container-service|pks-db\"}",
            "interval": "",
            "legendFormat": "{{exported_job}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "System Disk Usage",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": "110",
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\n\nEphemeral Disk: high value of `system_disk_ephemeral_percent` reported for this job for the displayed time interval. Ephemeral disk holds data that is temporary and will be lost if the VM is recreated.  \n\n## Troubleshooting Steps\n\nRun `bosh vms --vitals` to view jobs on affected deployments. Determine cause of the data consumption, and, if appropriate, increase disk space or scale out affected jobs.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 8,
          "y": 29
        },
        "hiddenSeries": false,
        "id": 20,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_disk_ephemeral_percent{exported_job=~\"pivotal-container-service|pks-db\"}",
            "interval": "",
            "legendFormat": "{{exported_job}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "Ephemeral Disk Usage",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": "110",
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": null,
        "description": "## Description\n\nPersistent Disk: high value of `system_disk_persistent_percent` reported for this job for the displayed time interval. Persistent Disk holds data meant to be stored long-term. Note that not all jobs use persistent disk.\n\n## Troubleshooting Steps\n\nRun `bosh vms --vitals` to view jobs on affected deployments. Determine cause of the data consumption, and, if appropriate, increase disk space or scale out affected jobs.",
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
          "h": 8,
          "w": 8,
          "x": 16,
          "y": 29
        },
        "hiddenSeries": false,
        "id": 13,
        "legend": {
          "avg": false,
          "current": false,
          "max": false,
          "min": false,
          "show": true,
          "total": false,
          "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
          "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
          {
            "expr": "system_disk_persistent_percent{exported_job=~\"pivotal-container-service|pks-db\"}",
            "interval": "",
            "legendFormat": "{{exported_job}}",
            "refId": "A"
          }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "Persistent Disk Usage",
        "tooltip": {
          "shared": true,
          "sort": 0,
          "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
          "buckets": null,
          "mode": "time",
          "name": null,
          "show": true,
          "values": []
        },
        "yaxes": [
          {
            "format": "percent",
            "label": null,
            "logBase": 1,
            "max": "110",
            "min": "0",
            "show": true
          },
          {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
          }
        ],
        "yaxis": {
          "align": false,
          "alignLevel": null
        }
      },
      {
        "collapsed": false,
        "datasource": null,
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 37
        },
        "id": 26,
        "panels": [],
        "title": "All Clusters",
        "type": "row"
      },
      {
        "datasource": null,
        "description": "## Description\nThis is the most important BOSH metric to monitor. It indicates if the Master VMs are healthy.\n\n## Troubleshooting Steps\nFind out which Master VM(s) are unhealthy.  Use the BOSH cli to find out which processes are unhealthy and investigate the logs for those processes.",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 38
        },
        "id": 28,
        "options": {
          "colorMode": "background",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "links": [
                {
                  "targetBlank": true,
                  "title": "Kubernetes Clusters Dashboard",
                  "url": "/d/hw2-kubernetes-clusters-overview/kubernetes-clusters-overview"
                }
              ],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": null
                  },
                  {
                    "color": "green",
                    "value": 0.99
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "avg(system_healthy{exported_job=\"master\"})",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Master VMs Health Status",
        "type": "stat"
      },
      {
        "datasource": null,
        "description": "## Description\nThis is the most important BOSH metric to monitor. It indicates if the Worker VMs are healthy.\n\n## Troubleshooting Steps\nFind out which Worker VM(s) are unhealthy.  Use the BOSH cli to find out which processes are unhealthy and investigate the logs for those processes.",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 38
        },
        "id": 30,
        "options": {
          "colorMode": "background",
          "fieldOptions": {
            "calcs": [
              "mean"
            ],
            "defaults": {
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": null
                  },
                  {
                    "color": "green",
                    "value": 0.99
                  }
                ]
              },
              "unit": "percentunit"
            },
            "overrides": [],
            "values": false
          },
          "graphMode": "none",
          "justifyMode": "auto",
          "orientation": "auto"
        },
        "pluginVersion": "6.7.3",
        "targets": [
          {
            "expr": "avg(system_healthy{exported_job=\"worker\"})",
            "instant": true,
            "interval": "",
            "legendFormat": "",
            "refId": "A"
          }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Worker VMs Health Status",
        "type": "stat"
      }
    ],
    "refresh": "5s",
    "schemaVersion": 22,
    "style": "dark",
    "tags": [],
    "templating": {
      "list": []
    },
    "time": {
      "from": "now-6h",
      "to": "now"
    },
    "timepicker": {
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ]
    },
    "timezone": "",
    "title": "PKS Control Plane",
    "uid": "hw2-pks-control-plane",
    "variables": {
      "list": []
    },
    "version": 2
  }
}
